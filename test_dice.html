
<html>
  <head>
<title>transform-style:preserve-3d</title>

<style>

body {
    padding                     : 130;
}

div {
    box-sizing                  : border-box;
    position                    : absolute;
    width                       : 100px;
    height                      : 100px;
    outline-offset              : 20px;
    outline-width               : 3px;
    outline-style               : solid;
    cursor                      : pointer;
}

.scene {
    outline-color               : transparent;
    outline-color               : pink;
    -webkit-perspective         : 500;
    -moz-perspective            : 500;
    perspective                 : 500;
}

.dice {
    outline-color               : transparent;
    outline-color               : lightgreen;
    -webkit-transition          : all 0.5s;
    -webkit-transform           : rotateX(30deg) rotateY(50deg) rotateZ(20deg) scale3D(0,0,0);
    -webkit-transform-style     : preserve-3d;
    -moz-transition             : all 0.5s;
    -moz-transform              : rotateX(30deg) rotateY(50deg) rotateZ(20deg) scale3D(0,0,0);
    -moz-transform-style        : preserve-3d;
    transition                  : all 0.5s;
    transform                   : rotateX(30deg) rotateY(50deg) rotateZ(20deg) scale3D(0,0,0);
    transform-style             : preserve-3d;
}

.centered {
    outline-color               : transparent;
    outline-color               : gold;
    -webkit-transform           : translateZ(-50px);
    -webkit-transform-style     : preserve-3d; 
    -moz-transform              : translateZ(-50px);
    -moz-transform-style        : preserve-3d; 
    transform                   : translateZ(-50px);
    transform-style             : preserve-3d; 
}

.face {
    outline-color               : transparent;
    border-radius               : 6px;
    border                      : 2px solid #777;
    background-color            : #fff;
    background-repeat           : no-repeat;
    background-image            : url(img/dot.png), url(img/dot.png), url(img/dot.png), url(img/dot.png), url(img/dot.png), url(img/dot.png);
}

.face:nth-of-type(1) {
    -webkit-transform           : rotateY(0deg);
    -moz-transform              : rotateY(0deg);
    transform                   : rotateY(0deg);
    background-position         : 40px 40px, -20px -20px, -20px -20px, -20px -20px, -20px -20px, -20px -20px;
}

.face:nth-of-type(2), .face:nth-of-type(3), .face:nth-of-type(4), .face:nth-of-type(5), .face:nth-of-type(6) {
    display                     : block;
}

.face:nth-of-type(6) { 
    display                     : block;
}

.face:nth-of-type(2) {
    -webkit-transform           : rotateY(-90deg);
    -webkit-transform-origin    : left;
    -moz-transform              : rotateY(-90deg);
    -moz-transform-origin       : left;
    transform                   : rotateY(-90deg);
    transform-origin            : left;
    background-position         : 10px 10px, -20px -20px, -20px -20px, -20px -20px, -20px -20px, 70px 70px;
}

.face:nth-of-type(3) {
    -webkit-transform           : rotateY(90deg);
    -webkit-transform-origin    : right;
    -moz-transform              : rotateY(90deg);
    -moz-transform-origin       : right;
    transform                   : rotateY(90deg);
    transform-origin            : right;
    background-position         : 10px 10px, 40px 40px, -20px -20px, -20px -20px, -20px -20px, 70px 70px;
}

.face:nth-of-type(4) {
    -webkit-transform           : rotateX(90deg);
    -webkit-transform-origin    : top;
    -moz-transform              : rotateX(90deg);
    -moz-transform-origin       : top;
    transform                   : rotateX(90deg);
    transform-origin            : top;
    background-position         : 10px 10px, -20px -20px, 10px 70px, 70px 10px, -20px -20px, 70px 70px;
}

.face:nth-of-type(5) {
    -webkit-transform           : rotateX(-90deg);
    -webkit-transform-origin    : bottom;
    -moz-transform              : rotateX(-90deg);
    -moz-transform-origin       : bottom;
    transform                   : rotateX(-90deg);
    transform-origin            : bottom;
    background-position         : 10px 10px, -20px -20px, 10px 70px, 70px 10px, 40px 40px, 70px 70px;
}

.face:nth-of-type(6) {
    -webkit-backface-visibility : visible;
    -webkit-transform           : rotateX(-180deg) translateZ(-100px);
    -webkit-transform-origin    : center;
    -moz-backface-visibility    : visible;
    -moz-transform              : rotateX(-180deg) translateZ(-100px);
    -moz-transform-origin       : center;
    backface-visibility         : visible;
    transform                   : rotateX(-180deg) translateZ(-100px);
    transform-origin            : center;
    background-position         : 10px 10px, 10px 40px, 10px 70px, 70px 10px, 70px 40px, 70px 70px;
}

</style>

</head>
<body>

    <div class="scene">
        <div class="dice">
            <div class="centered">
                <div class="face"></div>
                <div class="face"></div>
                <div class="face"></div>
                <div class="face"></div>
                <div class="face"></div>
                <div class="face"></div>
            </div>
        </div>
    </div>

<script>
window.onload = function() {
// return false;
    var dice = document.querySelector('.dice');
    dice.addEventListener('click', spin);
    var trans = 'rotateX(' + randAngle() + ') ' +
        'rotateY(' + randAngle() + ') ' +
        'rotateZ(' + randAngle() + ') ' +
        'scale3D(1,1,1)';
    dice.style.WebkitTransform = trans;
    dice.style.MozTransform = trans;
    dice.style.msTransform = trans;
    dice.style.transform = trans;
        
    
};

function spin(e) {
    var trans ='rotateX(' + randAngle() + ') ' +
        'rotateY(' + randAngle() + ') ' +
        'rotateZ(' + randAngle() + ') ' +
        'scale3D(1,1,1)';
    e.currentTarget.style.WebkitTransform = trans;
    e.currentTarget.style.MozTransform = trans;
    e.currentTarget.style.msTransform = trans;
    e.currentTarget.style.transform= trans;
        
}

function randAngle() {
    return( Math.floor( Math.random() * 360 ) + 'deg');
}
</script>

</body>
</html>
